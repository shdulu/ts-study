### 1.什么是跨域？

#### 1.1 URL

URL（Uniform Resource Locator）是互联网上的一种资源的简洁标识。它是一种特定格式的字符串，可以指向互联网上的任何资源。

以下是一个 URL 的完整示例：http://username:password@www.example.com:80/path/to/myfile.html?key1=value1&key2=value2#SomewhereInTheDocument

这个 URL 的各个部分具有以下含义：

1. http: 这部分被称为协议或者方案。它定义了如何访问和互动资源。常见的协议有 HTTP, HTTPS, FTP, FILE 等。
2. user:pass 这是可选部分，用于需要身份验证的服务。
3. site.com 这部分被称为主机名或者域名。它定义了我们想要访问的服务器的地址。这可以是一个 IP 地址或者一个注册的域名。
4. :80 这部分是可选的，称为端口号。它定义了服务器上的哪个服务我们要访问。如果未指定，那么默认端口是协议的标准端口（例如，对于 HTTP 是 80，HTTPS 是 443）。
5. /pa/th 这部分是路径，它指定了服务器上的哪个具体资源我们想要访问。
6. ?q=val 这部分是查询字符串，用于发送参数到服务器。它以问号开始，参数以键值对的形式存在，并用&符号分隔。
7. #hash 这部分被称为片段或者锚点，它指定了网页中的一个位置。当你访问一个 URL 时，浏览器会尝试滚动到这个位置。
   ![Alt text](https://static.zhufengpeixun.com/url_1684216406780.webp)

#### 1.2.什么是跨域?

"跨域"是指浏览器为了安全性，设置的同源策略限制

同源策略是一种约定，它是浏览器的一种安全功能，只允许 web 页面请求同一个源（协议，域名和端口）的资源

换句话说，如果在浏览器中运行的网页试图请求来自不同源的资源，就会发生"跨域"，这通常会被浏览器所禁止。

以下是几种跨域的情况：

1. 网站的 URL 协议不同。例如，一个用 HTTP 协议，一个用 HTTPS 协议。
2. 网站的域名不同。例如，一个是www.example.com，一个是www.test.com。
3. 网站的端口不同。例如，一个是www.example.com:8080，一个是www.example.com:9090。

### 2.JSONP

#### 2.1 什么是 JSONP

JSONP 是 "JSON with Padding" 的缩写，这是一个非官方的通信协议，允许在服务器之间进行数据交换，为了解决同源策略问题。这是一种用于处理跨源数据请求的方法。

在同源策略中，基于安全考虑，一个 Web 页面上的 JS 脚本只能访问与它同源的数据。如果要访问其他源的数据，就会遇到同源策略的限制。

那么，如何突破这个限制呢？其中一种方式就是使用 JSONP。事实上，尽管同源策略限制了 XMLHttpRequest 的跨域请求，但 script 标签的 src 属性却不受此限制，因此我们可以使用 script 元素来实现跨域请求。

#### 2.2 JSONP 工作原理

JSONP 工作原理是这样的：

客户端通过 script 标签向服务器发送请求，同时定义好回调函数。

服务器接收到请求后，将数据填充进这个回调函数中，然后将这个函数返回给客户端。

客户端接收到数据后，因为这个数据实际上是一个函数调用，所以会立即执行这个函数，从而可以获取到服务器返回的数据。

#### 2.3 百度搜索

下面示例为一个搜索输入框添加自动补全功能。它会监听用户在输入框中的输入事件，然后根据用户的输入内容发起 jsonp 请求到百度的搜索建议接口，获取搜索建议，然后将这些建议显示在页面上。

`https://www.baidu.com/sugrec?prod=pc&wd=a&cb=myCallback`
